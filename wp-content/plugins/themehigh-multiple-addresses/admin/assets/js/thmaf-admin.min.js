var thmaf_base=function($,window,document){"use strict";function escapeHTML(html){var fn=function(tag){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;"}[tag]||tag};return html.replace(/[&<>"]/g,fn)}function isHtmlIdValid(id){return/^[a-z\_]+[a-z0-9\_]*$/.test(id.trim())}function isValidHexColor(value){return!!preg_match("/^#[a-f0-9]{6}$/i",value)}function setup_tiptip_tooltips(){var tiptip_args={attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200};$(".tips").tipTip(tiptip_args)}function setup_enhanced_multi_select(parent){parent.find("select.thpladmin-enhanced-multi-select").each(function(){$(this).hasClass("enhanced")||$(this).select2({minimumResultsForSearch:10,allowClear:!0,placeholder:$(this).data("placeholder")}).addClass("enhanced")})}function setup_enhanced_multi_select_with_value(parent){parent.find("select.thpladmin-enhanced-multi-select").each(function(){if(!$(this).hasClass("enhanced")){$(this).select2({minimumResultsForSearch:10,allowClear:!0,placeholder:$(this).data("placeholder")}).addClass("enhanced");var value=$(this).data("value");value=value.split(","),$(this).val(value),$(this).trigger("change")}})}function prepare_field_order_indexes(elm){$(elm+" tbody tr").each(function(index,el){$("input.f_order",el).val(parseInt($(el).index(elm+" tbody tr")))})}function setup_sortable_table(parent,elm,left){parent.find(elm+" tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,helper:function(e,ui){return ui.children().each(function(){$(this).width($(this).width())}),ui.css("left",left),ui}}),$(elm+" tbody").on("sortstart",function(event,ui){ui.item.css("background-color","#f6f6f6")}),$(elm+" tbody").on("sortstop",function(event,ui){ui.item.removeAttr("style"),prepare_field_order_indexes(elm)})}function get_property_field_value(form,type,name){var value="";switch(type){case"select":value=form.find("select[name=i_"+name+"]").val(),value=null==value?"":value;break;case"checkbox":value=form.find("input[name=i_"+name+"]").prop("checked"),value=value?1:0;break;default:value=form.find("input[name=i_"+name+"]").val(),value=null==value?"":value}return value}function set_property_field_value(form,type,name,value,multiple){switch(type){case"select":1==multiple&&"string"==typeof value&&(value=value.split(","),name+="[]"),form.find('select[name="i_'+name+'"]').val(value);break;case"checkbox":value=1==value,form.find("input[name=i_"+name+"]").prop("checked",value);break;default:form.find("input[name=i_"+name+"]").val(value)}}return{escapeHTML:escapeHTML,isHtmlIdValid:isHtmlIdValid,isValidHexColor:isValidHexColor,setup_tiptip_tooltips:setup_tiptip_tooltips,setupEnhancedMultiSelect:setup_enhanced_multi_select,setupEnhancedMultiSelectWithValue:setup_enhanced_multi_select_with_value,setupSortableTable:setup_sortable_table,get_property_field_value:get_property_field_value,set_property_field_value:set_property_field_value}}(window.jQuery,window,document),thmaf_settings=function($,window,document){"use strict";function disable_multi_shipping_fields(){var enable_multi_shipping=$("input[name=i_enable_multi_shipping]"),enable_product_variation=$("input[name=i_enable_product_variation]");$("input[name=i_enable_billing]").is(":checked")?$("input#thb_limit_value").prop("disabled",!1):$("input#thb_limit_value").prop("disabled",!0),$(document).on("click","input[name=i_enable_billing]",function(){$(this).prop("checked")?$("input#thb_limit_value").prop("disabled",!1):$("input#thb_limit_value").prop("disabled",!0)}),$("input[name=i_enable_shipping]").is(":checked")?(enable_multi_shipping.prop("disabled",!1),enable_product_variation.prop("disabled",!1),$("input#ths_limit_value").prop("disabled",!1)):(enable_multi_shipping.prop("disabled",!0),enable_product_variation.prop("disabled",!0),$("input#ths_limit_value").prop("disabled",!0)),$(document).on("click","input[name=i_enable_shipping]",function(){$(this).prop("checked")?(enable_multi_shipping.prop("disabled",!1),enable_product_variation.prop("disabled",!1),$("input#ths_limit_value").prop("disabled",!1)):(enable_multi_shipping.prop("disabled",!0),enable_product_variation.prop("disabled",!0),$("input#ths_limit_value").prop("disabled",!0))}),enable_multi_shipping.is(":checked")?enable_product_variation.prop("disabled",!1):enable_product_variation.prop("disabled",!0),$(document).on("click","input[name=i_enable_multi_shipping]",function(){$(this).prop("checked")?enable_product_variation.prop("disabled",!1):enable_product_variation.prop("disabled",!0)})}function hide_edit_button_on_admin_order(){if("yes"==$(".multi_ship_enabled").val()){var parent_elm=$(".load_customer_shipping").parent();parent_elm.siblings(".edit_address").hide()}else{var parent_elm=$(".load_customer_shipping").parent();parent_elm.siblings(".edit_address").show()}}return $(function(){$("#thmaf_product_fields_form");thmaf_base.setup_tiptip_tooltips(),disable_multi_shipping_fields(),hide_edit_button_on_admin_order()}),{disable_multi_shipping_fields:disable_multi_shipping_fields,hide_edit_button_on_admin_order:hide_edit_button_on_admin_order}}(window.jQuery,window,document);